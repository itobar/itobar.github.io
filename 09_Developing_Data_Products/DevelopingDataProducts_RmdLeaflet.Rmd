---
title: 'Developing Data Products: R Markdown and Leaflet'
author: "Ingrid Tobar"
date: "7/5/2019"
output:
  html_document:
    keep_md: yes
  pdf_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## 1. Project Goal

Create a webpage using R Markdown that features a map created with Leaflet.
This webpage is hosted on GitHub pages and the date listed above is the date when it was created.


### Data

The original data is available for download at: https://waterdata.usgs.gov

The data displayed on this Leaflet map (Surface Water Stream Gauges for Harris County, TX) is available here:

https://github.com/itobar/itobar.github.io/blob/master/09_Developing_Data_Products/HarrisCounty_STGauges.csv


## 2. Code

### Package Installation and Loading

Install and load the required Leaflet package for creating maps:

```{r}
#install.packages("leaflet")
library(leaflet)
```

### Data Loading and Inspection

Load the data and inspect the first 6 rows:

```{r}

STGauges <- read.csv("HarrisCounty_STGauges.csv")
head(STGauges)
```

## 3. Map Results

### Create Map with Leaflet

The following map shows **Surface Water Stream Gauges for Harris County, TX**.
Stream gauges are colored by Site Agency (USGS or TX003) and a hyperlink to access data for each gauge is provided in the popup.

```{r}
cof <- colorFactor(c("dark green", "blue"), domain=c("TX003", "USGS"))
m <- leaflet(STGauges) %>% addTiles%>% 
  setView(-95.3698, 29.7604, zoom = 10) %>% 
  addCircleMarkers(~SiteLongitude, ~SiteLatitude, popup= ~paste("<h3 style='color: blue'>",SiteName,"</h3>","<b>Site Number:</b>",SiteNumber,"<br>","<b>Link:</b>", "<a href = ", SiteNWISURL, "> Access Data </a>", sep=" "), weight = 4, radius=4, 
                 color=~cof(SiteAgency), stroke = TRUE, fillOpacity = 0.8) %>%
  addLegend("bottomright", colors= c("green", "blue"), labels=c("TX003", "USGS"), title="Site Agency")

m
```